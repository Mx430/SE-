<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="css/home.css" />
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"
          integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
          crossorigin="anonymous">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="js/reader.js"></script>
  <script src="js/model.js"></script>
  <script src="js/parser.js"></script>
  <script src="js/drawer.js"></script>
  <script src="js/app.js" defer></script>

  <title>Draw Class Diagram</title>
</head>
<body>
  <form onsubmit="return false" id="app">

    <button type="reset">Clear All</button>
  
    <section id="sec-input">
      <textarea rows="10" cols="50"
                v-model="codestr"
                @input="input()" :placeholder="placeholder"></textarea>

    </section>
    <pre><div class="err-msg">{{ errMsg }}</div></pre>
    
    <section id="sec-output">
      <span v-if="!graph.length">
        No Graph
      </span>
      <svg v-else
           viewBox="-1200 -100 2500 1500">
        <g>

          <g v-for="r in graph">
            <rect class="cls-box" stroke="black"
                  :x="r.X" :y="r.Y"
                  :width="r.w" :height="r.h"></rect>
            <g>
              <text class="cls-name"
                    :x="r.X + 10" :y="r.Y + 20">{{ r.name }}</text>
            </g>
            <line class="cls-line" stroke="black"
                  :x1="r.X" :y1="r.ClassNameSeparatorY"
                  :x2="r.X + r.w" :y2="r.ClassNameSeparatorY"/>
    
            <g>
              <text v-for="(d, idx) in r.attrs"
                :x="r.X + 10" :y="r.Y + 30 + (idx + 1) * 20">
                {{ d }}</text>
              
            </g>
            <line class="cls-line a22" stroke="black"
                :x1="r.X" :y1="r.AttributesSeparatorY"
                :x2="r.X + r.w" :y2="r.AttributesSeparatorY" />

            <g>
              <text v-for="(d, idx) in r.methods"
                    :x="r.X + 10" :y="(r.Y + (r.attrs.length + (r.attrs.length - 1)) * 10 + 20 + 30) + (idx + 1) * 20">
                    {{ d }}</text>
            </g>

            <line v-if="r.parent" class="assc"
                  :x1="r.x" :y1="r.Y"
                  :x2="r.parent.x" :y2="r.parent.Y + r.parent.h"></line>
          </g>
    
        </g>
      </svg>

    </section>


  </form>
</body>
</html>